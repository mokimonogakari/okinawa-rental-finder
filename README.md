# æ²–ç¸„è³ƒè²¸ãƒ•ã‚¡ã‚¤ãƒ³ãƒ€ãƒ¼ ğŸ 

æ²–ç¸„çœŒã®è³ƒè²¸ç‰©ä»¶ã‚’è¤‡æ•°ã‚µã‚¤ãƒˆã‹ã‚‰ã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°ã—ã€æ²–ç¸„ç‰¹åŒ–ã®æ¤œç´¢æ¡ä»¶ã§çµã‚Šè¾¼ã¿ã€ç›¸å ´æ¯”è¼ƒã§ã€ŒãŠå¾—ç‰©ä»¶ã€ã‚’è¦‹ã¤ã‘ã‚‹Webã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã€‚

## æ©Ÿèƒ½

- **ãƒãƒ«ãƒã‚µã‚¤ãƒˆã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°**: ã‚°ãƒ¼ãƒ›ãƒ¼ãƒ ã€ã†ã¡ãªãƒ¼ã‚‰ã„ãµã€SUUMOã€HOME'Sã®4ã‚µã‚¤ãƒˆã‹ã‚‰ç‰©ä»¶æƒ…å ±ã‚’è‡ªå‹•åé›†
- **æ²–ç¸„ç‰¹åŒ–ã®æ¤œç´¢æ¡ä»¶**: å°é¢¨å¯¾ç­–ã®æ§‹é€ ã€é§è»Šå ´ã€åŸºåœ°é¨’éŸ³ç­‰ã‚’å«ã‚€è©³ç´°æ¤œç´¢
- **AIé©æ­£ä¾¡æ ¼æ¨å®š**: è·¯ç·šä¾¡ãƒ»åœ°ä¾¡å…¬ç¤ºãƒ»å‘¨è¾ºç›¸å ´ã‹ã‚‰æ©Ÿæ¢°å­¦ç¿’ãƒ¢ãƒ‡ãƒ«ã§é©æ­£è³ƒæ–™ã‚’æ¨å®š
- **å‰²å®‰åº¦ã‚¹ã‚³ã‚¢**: å®Ÿéš›è³ƒæ–™ã¨æ¨å®šè³ƒæ–™ã‚’æ¯”è¼ƒã—ã€ŒãŠå¾—ç‰©ä»¶ã€ã‚’è‡ªå‹•åˆ¤å®š
- **LINEé€šçŸ¥**: æ¡ä»¶ã«åˆã†æ–°ç€ç‰©ä»¶ã‚’LINE Messaging APIã§è‡ªå‹•é€šçŸ¥
- **åˆ†æãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰**: å¸‚ç”ºæ‘åˆ¥ç›¸å ´ã€è³ƒæ–™åˆ†å¸ƒã€ä¾¡æ ¼ãƒˆãƒ¬ãƒ³ãƒ‰ã‚’ã‚°ãƒ©ãƒ•è¡¨ç¤º

## æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯

| ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ | æŠ€è¡“ |
|-------------|------|
| ã‚¹ã‚¯ãƒ¬ã‚¤ãƒ‘ãƒ¼ | Scrapy |
| ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ | SQLite (WALãƒ¢ãƒ¼ãƒ‰) |
| Web UI | Streamlit |
| ä¾¡æ ¼æ¨å®š | scikit-learn (Ridgeå›å¸° + Random Forest) |
| é€šçŸ¥ | LINE Messaging API |
| åœ°ä¾¡ãƒ‡ãƒ¼ã‚¿ | ä¸å‹•ç”£æƒ…å ±ãƒ©ã‚¤ãƒ–ãƒ©ãƒªAPI + å›½åœŸæ•°å€¤æƒ…å ± |
| ã‚¤ãƒ³ãƒ•ãƒ© | ã•ãã‚‰ã®VPS 1G |
| ãƒªãƒãƒ—ãƒ­ | Nginx |

## ãƒ‡ãƒ—ãƒ­ã‚¤å…ˆç’°å¢ƒ

### æ¨å¥¨ç’°å¢ƒ: ã•ãã‚‰ã®VPS 1G (880å††/æœˆ)

| é …ç›® | è¦ä»¶ |
|------|------|
| OS | Ubuntu 24.04 LTS |
| CPU | 2ã‚³ã‚¢ä»¥ä¸Š |
| ãƒ¡ãƒ¢ãƒª | 1GBä»¥ä¸Š (2GBæ¨å¥¨) |
| ãƒ‡ã‚£ã‚¹ã‚¯ | 25GBä»¥ä¸Š |
| Python | 3.12ä»¥ä¸Š |
| ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ | å¤–éƒ¨HTTPSé€šä¿¡å¯èƒ½ (ã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°å…ˆ4ã‚µã‚¤ãƒˆ + API) |

### ãªãœã•ãã‚‰VPS 1Gã‹

- **æœˆé¡880å††**ã§å¿…è¦ååˆ†ãªã‚¹ãƒšãƒƒã‚¯
- å›½å†…ã‚µãƒ¼ãƒãƒ¼ã®ãŸã‚ã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°å¯¾è±¡ã‚µã‚¤ãƒˆã¨ã®é€šä¿¡ãŒé«˜é€Ÿ
- Ubuntu 24.04å¯¾å¿œã€Python 3.12ãƒ—ãƒªã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
- å›ºå®šIPã‚¢ãƒ‰ãƒ¬ã‚¹ä»˜ã

### ä»–ã®é¸æŠè‚¢ã¨ã®æ¯”è¼ƒ

| ç’°å¢ƒ | è²»ç”¨ | åˆ¤å®š | ç†ç”± |
|------|------|------|------|
| **ã•ãã‚‰VPS 1G** | 880å††/æœˆ | **æ¨å¥¨** | ã‚³ã‚¹ãƒ‘æœ€è‰¯ã€‚å¸¸æ™‚ç¨¼åƒ+å®šæœŸã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚° |
| ã•ãã‚‰VPS 2G | 1,738å††/æœˆ | ä½™è£•ãŒã‚ã‚‹å ´åˆ | ãƒ¡ãƒ¢ãƒª2GBã§ãƒ¢ãƒ‡ãƒ«å­¦ç¿’ãŒå®‰å®š |
| Render.com Free | 0å†† | ä¸å¯ | ã‚¹ãƒªãƒ¼ãƒ—ã‚ã‚Šã€ã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°å®šæœŸå®Ÿè¡Œä¸å¯ |
| GitHub Pages | 0å†† | ä¸å¯ | é™çš„ã‚µã‚¤ãƒˆã®ã¿ã€‚Pythonå®Ÿè¡Œä¸å¯ |
| AWS EC2 t3.micro | ~1,500å††/æœˆ | å‰²é«˜ | åŒç­‰ã‚¹ãƒšãƒƒã‚¯ã§è²»ç”¨ãŒé«˜ã„ |
| è‡ªå®…PC (WSL) | 0å†† | é–‹ç™ºç”¨ | PCèµ·å‹•ä¸­ã®ã¿ã€‚æœ¬ç•ªé‹ç”¨ã«ã¯ä¸å‘ã |

### å…±å­˜å¯èƒ½ãªæ—¢å­˜ã‚µãƒ¼ãƒ“ã‚¹

VPSã«æ—¢å­˜ã‚µãƒ¼ãƒ“ã‚¹ãŒã‚ã‚‹å ´åˆã€Nginx ãƒ‘ã‚¹ãƒ™ãƒ¼ã‚¹ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã§å…±å­˜å¯èƒ½:

```
http://your-server/          â†’ æ—¢å­˜ã‚µãƒ¼ãƒ“ã‚¹
http://your-server/rental    â†’ æ²–ç¸„è³ƒè²¸ãƒ•ã‚¡ã‚¤ãƒ³ãƒ€ãƒ¼ (Streamlit)
```

## ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

```bash
# ãƒªãƒã‚¸ãƒˆãƒªã‚¯ãƒ­ãƒ¼ãƒ³
git clone https://github.com/yourname/okinawa-rental-finder.git
cd okinawa-rental-finder

# ä»®æƒ³ç’°å¢ƒ
python3 -m venv .venv
source .venv/bin/activate

# ä¾å­˜é–¢ä¿‚ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
pip install -e '.[dev]'

# ç’°å¢ƒå¤‰æ•°è¨­å®š
cp .env.example .env
# .env ã‚’ç·¨é›†ã—ã¦APIã‚­ãƒ¼ã‚’è¨­å®š
```

## ä½¿ã„æ–¹

```bash
# Web UIèµ·å‹•
streamlit run src/web/app.py

# ã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°å®Ÿè¡Œ (å…¨ã‚µã‚¤ãƒˆ)
./scripts/run_scraper.sh all

# ç‰¹å®šã‚µã‚¤ãƒˆã®ã¿
./scripts/run_scraper.sh goohome

# ä¾¡æ ¼æ¨å®šãƒ¢ãƒ‡ãƒ«å­¦ç¿’
python -m src.pricing.training

# ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
pytest tests/ -v
```

## ã‚¨ãƒªã‚¢å®šç¾©

æœ¬ã‚¢ãƒ—ãƒªã§ã¯æ²–ç¸„çœŒã‚’ä»¥ä¸‹ã®4åœ°åŸŸã«åˆ†é¡ã—ã€ã•ã‚‰ã«ä¸€éƒ¨ã®å¸‚ç”ºæ‘ã«ã¯ã‚µãƒ–ã‚¨ãƒªã‚¢ï¼ˆåœ°åŸŸçµã‚Šè¾¼ã¿ï¼‰ã‚’è¨­ã‘ã¦ã„ã¾ã™ã€‚

### åœ°åŸŸåˆ†é¡

| åœ°åŸŸ | å¸‚ç”ºæ‘ |
|------|--------|
| å—éƒ¨ | é‚£è¦‡å¸‚ã€è±Šè¦‹åŸå¸‚ã€å—åŸå¸‚ã€ç³¸æº€å¸‚ã€å—é¢¨åŸç”ºã€ä¸é‚£åŸç”ºã€å…«é‡ç€¬ç”º |
| ä¸­éƒ¨ | æ²–ç¸„å¸‚ã€ã†ã‚‹ã¾å¸‚ã€å®œé‡æ¹¾å¸‚ã€æµ¦æ·»å¸‚ã€åŒ—è°·ç”ºã€å˜‰æ‰‹ç´ç”ºã€èª­è°·æ‘ã€ä¸­åŸæ‘ã€è¥¿åŸç”ºã€åŒ—ä¸­åŸæ‘ |
| åŒ—éƒ¨ | åè­·å¸‚ã€æœ¬éƒ¨ç”ºã€æ©ç´æ‘ã€é‡‘æ­¦ç”ºã€å®œé‡åº§æ‘ã€å›½é ­æ‘ã€å¤§å®œå‘³æ‘ã€æ±æ‘ã€ä»Šå¸°ä»æ‘ |
| é›¢å³¶ | å®®å¤å³¶å¸‚ã€çŸ³å£å¸‚ã€ä¹…ç±³å³¶ç”ºã€ç«¹å¯Œç”ºã€ä¸é‚£å›½ç”º |

### ã‚µãƒ–ã‚¨ãƒªã‚¢å®šç¾©ï¼ˆç‹¬è‡ªåˆ†é¡ï¼‰

å¸‚ç”ºæ‘å†…ã‚’ã•ã‚‰ã«çµã‚Šè¾¼ã‚€ãŸã‚ã®ç‹¬è‡ªã‚¨ãƒªã‚¢å®šç¾©ã§ã™ã€‚ç‰©ä»¶ã®ä½æ‰€ã«å«ã¾ã‚Œã‚‹ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã§ãƒãƒƒãƒãƒ³ã‚°ã—ã¾ã™ã€‚

#### é‚£è¦‡å¸‚

| ã‚µãƒ–ã‚¨ãƒªã‚¢ | ä½æ‰€ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ | èª¬æ˜ |
|-----------|---------------|------|
| æ–°éƒ½å¿ƒã‚¨ãƒªã‚¢ | å®‰è¬ã€å¤©ä¹…ã€ãŠã‚‚ã‚ã¾ã¡ã€éŠ˜è‹…ã€çœŸå˜‰æ¯”ã€æ¾å³¶ | ãŠã‚‚ã‚ã¾ã¡é§…å‘¨è¾ºã®å•†æ¥­ãƒ»ä½å®…åœ°åŒº |
| é¦–é‡Œã‚¨ãƒªã‚¢ | é¦–é‡Œ | é¦–é‡Œé§…ã€œçŸ³å¶ºé§…å‘¨è¾ºã®ä½å®…åœ°åŒº |

#### æµ¦æ·»å¸‚

| ã‚µãƒ–ã‚¨ãƒªã‚¢ | ä½æ‰€ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ | èª¬æ˜ |
|-----------|---------------|------|
| çµŒå¡šãƒ»å‰ç”°ã‚¨ãƒªã‚¢ | çµŒå¡šã€å‰ç”° | çµŒå¡šé§…ãƒ»æµ¦æ·»å‰ç”°é§…å‘¨è¾º |
| è¥¿åŸã‚¨ãƒªã‚¢ | è¥¿åŸ | ã¦ã ã“æµ¦è¥¿é§…å‘¨è¾º |

> ã‚µãƒ–ã‚¨ãƒªã‚¢ã®å®šç¾©ã¯ `config/search_conditions.yaml` ã® `sub_areas` ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã§ç®¡ç†ã—ã¦ã„ã¾ã™ã€‚æ–°ã—ã„ã‚¨ãƒªã‚¢ã‚’è¿½åŠ ã™ã‚‹å ´åˆã¯ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç·¨é›†ã—ã¦ãã ã•ã„ã€‚

## è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«

| ãƒ•ã‚¡ã‚¤ãƒ« | å†…å®¹ |
|---------|------|
| `config/settings.yaml` | ã‚¢ãƒ—ãƒªå…¨ä½“è¨­å®š |
| `config/search_conditions.yaml` | æ¤œç´¢æ¡ä»¶ãƒã‚¹ã‚¿ (æ²–ç¸„ç‰¹åŒ–) |
| `config/scraping_targets.yaml` | ã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°å¯¾è±¡ã‚µã‚¤ãƒˆ |
| `config/notification.yaml` | LINEé€šçŸ¥è¨­å®š |

## VPSãƒ‡ãƒ—ãƒ­ã‚¤

```bash
# 1. ã‚¢ãƒ—ãƒªé…ç½®
sudo mkdir -p /opt/okinawa-rental-finder
sudo chown $USER:$USER /opt/okinawa-rental-finder
git clone https://github.com/mokimonogakari/okinawa-rental-finder.git /opt/okinawa-rental-finder
cd /opt/okinawa-rental-finder

# 2. Pythonç’°å¢ƒæ§‹ç¯‰
python3 -m venv .venv
.venv/bin/pip install -e .
mkdir -p data/models data/land_price logs

# 3. ç’°å¢ƒå¤‰æ•°è¨­å®š
cp .env.example .env
# .env ã‚’ç·¨é›†ã—ã¦APIã‚­ãƒ¼ã‚’è¨­å®š

# 4. systemdç™»éŒ² (Web UIå¸¸é§ + ã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°å®šæœŸå®Ÿè¡Œ)
sudo cp systemd/*.service systemd/*.timer /etc/systemd/system/
sudo systemctl daemon-reload
sudo systemctl enable --now okinawa-rental-web
sudo systemctl enable --now okinawa-rental-scraper.timer

# 5. Nginxè¨­å®š (æ—¢å­˜Nginxè¨­å®šã« /rental locationã‚’è¿½åŠ )
# â†’ è©³ç´°ã¯ docs/ ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªå‚ç…§
sudo nginx -t && sudo systemctl reload nginx
```

## ãƒ©ã‚¤ã‚»ãƒ³ã‚¹

MIT
